<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cribbage Trainer Board</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f5f5f5;
      padding: 20px;
      text-align: center;
    }

    h1 {
      margin-bottom: 10px;
    }

    .board {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 1220px;
      margin: 20px auto;
      gap: 4px;
    }

    .hole {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #ddd;
      position: relative;
      border: 1px solid #aaa;
    }

    .peg {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: absolute;
      top: 9px;
      left: 9px;
    }

    .p1-front {
      background: red;
    }

    .p1-back {
      background: pink;
    }

    .p2-front {
      background: blue;
    }

    .p2-back {
      background: lightblue;
    }

    .controls {
      margin-top: 30px;
    }

    .card-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 15px;
    }

    .card-buttons button {
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
    }

    .status {
      margin: 10px;
      font-weight: bold;
    }

    .go-button, .reset-button {
      margin: 10px;
      padding: 10px 16px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <h1>Cribbage Trainer Board</h1>

  <div class="status">
    <span>Player 1 Score: <span id="p1Score">0</span></span> |
    <span>Running Count: <span id="count">0</span></span>
  </div>

  <div class="board" id="board"></div>

  <div class="controls">
    <div class="card-buttons">
      <!-- Card values from A (1) to K (10) -->
      <button onclick="playCard(1)">A</button>
      <button onclick="playCard(2)">2</button>
      <button onclick="playCard(3)">3</button>
      <button onclick="playCard(4)">4</button>
      <button onclick="playCard(5)">5</button>
      <button onclick="playCard(6)">6</button>
      <button onclick="playCard(7)">7</button>
      <button onclick="playCard(8)">8</button>
      <button onclick="playCard(9)">9</button>
      <button onclick="playCard(10)">10</button>
      <button onclick="playCard(10)">J</button>
      <button onclick="playCard(10)">Q</button>
      <button onclick="playCard(10)">K</button>
    </div>
    <button class="go-button" onclick="resetCount()">Go (Reset Count)</button>
    <button class="reset-button" onclick="resetGame()">Reset Game</button>
  </div>

  <script>
    const boardEl = document.getElementById('board');
    const p1ScoreEl = document.getElementById('p1Score');
    const countEl = document.getElementById('count');

    let p1Front = 0;
    let p1Back = 0;
    let runningCount = 0;

    // Create 121 holes
    for (let i = 0; i <= 120; i++) {
      const hole = document.createElement('div');
      hole.classList.add('hole');
      hole.id = `hole-${i}`;
      boardEl.appendChild(hole);
    }

    function updatePegs() {
      document.querySelectorAll('.peg').forEach(p => p.remove());

      const frontHole = document.getElementById(`hole-${p1Front}`);
      const backHole = document.getElementById(`hole-${p1Back}`);

      if (frontHole) {
        const peg1 = document.createElement('div');
        peg1.classList.add('peg', 'p1-front');
        frontHole.appendChild(peg1);
      }

      if (backHole) {
        const peg2 = document.createElement('div');
        peg2.classList.add('peg', 'p1-back');
        backHole.appendChild(peg2);
      }

      p1ScoreEl.textContent = p1Front;
    }

    function playCard(value) {
      if (p1Front >= 121) return;

      runningCount += value;
      if (runningCount > 31) {
        alert("Count exceeded 31. Please press 'Go' to reset the count.");
        runningCount -= value;
        return;
      }

      countEl.textContent = runningCount;

      // For now, just award 1 point per card
      movePeg(1);
    }

    function movePeg(points) {
      let newPos = p1Back + points;
      if (newPos > 121) newPos = 121;

      // Leapfrog: back peg jumps ahead of front peg
      p1Back = p1Front;
      p1Front = newPos;

      updatePegs();
    }

    function resetCount() {
      runningCount = 0;
      countEl.textContent = 0;
    }

    function resetGame() {
      p1Front = 0;
      p1Back = 0;
      runningCount = 0;
      updatePegs();
      countEl.textContent = 0;
    }

    // Initial display
    updatePegs();
  </script>
</body>
</html>

